# Результаты домашнего задания к занятию "3.7. Компьютерные сети, лекция 2"
1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?
    * Linux
        ```bash
        vagrant@vagrant:~$ ip -c -br link
        lo               UNKNOWN        00:00:00:00:00:00 <LOOPBACK,UP,LOWER_UP>
        eth0             UP             08:00:27:73:60:cf <BROADCAST,MULTICAST,UP,LOWER_UP>
        ```
    * Windows
        ```
        C:\Users\Home>ipconfig /all

        Настройка протокола IP для Windows

        Имя компьютера  . . . . . . . . . : DESKTOP-HG433L6
        Основной DNS-суффикс  . . . . . . :
        Тип узла. . . . . . . . . . . . . : Гибридный
        IP-маршрутизация включена . . . . : Нет
        WINS-прокси включен . . . . . . . : Нет
        Порядок просмотра суффиксов DNS . : tendawifi.com

        Неизвестный адаптер Подключение по локальной сети:

        Состояние среды. . . . . . . . : Среда передачи недоступна.
        DNS-суффикс подключения . . . . . :
        Описание. . . . . . . . . . . . . : TAP-Windows Adapter V9 for OpenVPN Connect
        Физический адрес. . . . . . . . . : 00-FF-17-98-BB-22
        DHCP включен. . . . . . . . . . . : Нет
        Автонастройка включена. . . . . . : Да

        Адаптер Ethernet Ethernet:

        DNS-суффикс подключения . . . . . : tendawifi.com
        Описание. . . . . . . . . . . . . : Realtek PCIe GbE Family Controller
        Физический адрес. . . . . . . . . : 04-D4-C4-4C-0E-7B
        DHCP включен. . . . . . . . . . . : Да
        Автонастройка включена. . . . . . : Да
        Локальный IPv6-адрес канала . . . : fe80::2187:9931:8766:c736%9(Основной)
        IPv4-адрес. . . . . . . . . . . . : 192.168.44.193(Основной)
        Маска подсети . . . . . . . . . . : 255.255.255.0
        Аренда получена. . . . . . . . . . : 5 декабря 2021 г. 11:44:27
        Срок аренды истекает. . . . . . . . . . : 12 декабря 2021 г. 11:44:27
        Основной шлюз. . . . . . . . . : 192.168.44.1
        DHCP-сервер. . . . . . . . . . . : 192.168.44.1
        IAID DHCPv6 . . . . . . . . . . . : 67425476
        DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-25-9F-E8-71-04-D4-C4-4C-0E-7B
        DNS-серверы. . . . . . . . . . . : 192.168.44.1
        NetBios через TCP/IP. . . . . . . . : Включен
        ```
1. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
    * LLDP - протокол для обмена информацией между соседними устройствами.
    * для опеределния соседних устройств в linux используется пакет `lldpd`
    * `lldpctl` - команда для опереления соседних устройств
1. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
    * для разделения на несколько виртуальных сетей используется `VLAN`
    * пакет для Linux также называется `vlan`
        ```bash
        vagrant@vagrant:~$ cat /etc/network/interfaces
        auto vlan200
        iface vlan200 inet static
        address 10.0.1.1
        netmask 255.0.0.0
        vlan_raw_device eth0
        ```
1. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.
    * Типы агрегации интерфейсов в Linux:  
        **mode=0 (balance-rr)**

        Этот режим используется по-умолчанию, если в настройках не указано другое. balance-rr обеспечивает балансировку нагрузки и отказоустойчивость. В данном режиме пакеты отправляются "по кругу" от первого интерфейса к последнему и сначала. Если выходит из строя один из интерфейсов, пакеты отправляются на остальные оставшиеся.При подключении портов к разным коммутаторам, требует их настройки.
        
        **mode=1 (active-backup)**

        При active-backup один интерфейс работает в активном режиме, остальные в ожидающем. Если активный падает, управление передается одному из ожидающих. Не требует поддержки данной функциональности от коммутатора.
        
        **mode=2 (balance-xor)**

        Передача пакетов распределяется между объединенными интерфейсами по формуле ((MAC-адрес источника) XOR (MAC-адрес получателя)) % число интерфейсов. Один и тот же интерфейс работает с определённым получателем. Режим даёт балансировку нагрузки и отказоустойчивость.
        
        **mode=3 (broadcast)**

        Происходит передача во все объединенные интерфейсы, обеспечивая отказоустойчивость.
        
        **mode=4 (802.3ad)**

        Это динамическое объединение портов. В данном режиме можно получить значительное увеличение пропускной способности как входящего так и исходящего трафика, используя все объединенные интерфейсы. Требует поддержки режима от коммутатора, а так же (иногда) дополнительную настройку коммутатора.
        
        **mode=5 (balance-tlb)**

        Адаптивная балансировка нагрузки. При balance-tlb входящий трафик получается только активным интерфейсом, исходящий - распределяется в зависимости от текущей загрузки каждого интерфейса. Обеспечивается отказоустойчивость и распределение нагрузки исходящего трафика. Не требует специальной поддержки коммутатора.
        
        **mode=6 (balance-alb)**

        Адаптивная балансировка нагрузки (более совершенная). Обеспечивает балансировку нагрузки как исходящего (TLB, transmit load balancing), так и входящего трафика (для IPv4 через ARP). Не требует специальной поддержки коммутатором, но требует возможности изменять MAC-адрес устройства.
    * ```bash
        root@testserver:~# cat /etc/network/interfaces        
        auto lo
        iface lo inet loopback
     
        auto bond0 eth0 eth1        
        iface bond0 inet static        
                address 10.0.0.11
                netmask 255.255.255.0
                gateway 10.0.0.254                
                bond-slaves eth0 eth1                
                bond-mode balance-alb                
                bond-miimon 100                
                bond-downdelay 200        
                bond-updelay 200       
      ```
1. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.
    * a.b.c.d/29 - 8 адресов
    * `32` подсети и `192` хоста подсетей /29 можно получить из сети с маской /24 
    * ```bash
        Address:   10.10.10.0                 
        Netmask:   255.255.255.0 = 24 
        Wildcard:  0.0.0.255          
        =>
        Network:   10.10.10.0/24      
        HostMin:   10.10.10.1         
        HostMax:   10.10.10.254       
        Broadcast: 10.10.10.255       
        Hosts/Net: 254

        ===================================
        Netmask:   255.255.255.248 = 29
        
        1.
        Network:   10.10.10.0/29   
        HostMin:   10.10.10.1      
        HostMax:   10.10.10.6      
        Broadcast: 10.10.10.7      
        Hosts/Net: 6               

        2.
        Network:   10.10.10.8/29   
        HostMin:   10.10.10.9      
        HostMax:   10.10.10.14     
        Broadcast: 10.10.10.15     
        Hosts/Net: 6               

        3.
        Network:   10.10.10.16/29  
        HostMin:   10.10.10.17     
        HostMax:   10.10.10.22     
        Broadcast: 10.10.10.23     
        Hosts/Net: 6               
      ```
1. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
    * Можно взять из диапазона адресов `100.64.0.0 — 100.127.255.255 (маска подсети: 255.192.0.0 или /10) Carrier-Grade NAT`
    * ```bash        
        Netmask:   255.255.255.192 = 26
        Network:   100.64.0.0/26       
        HostMin:   100.64.0.1          
        HostMax:   100.64.0.62         
        Broadcast: 100.64.0.63         
        Hosts/Net: 62                    
      ```
1. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?
    * linux         
        `ip neigh`  
      windows  
        `arp -a`
    * Полностью очистить кэш можно следующим образом:  
    linux  
    `ip neigh flush all`  
    windows  
    `netsh interface ip delete arpcache`
    * linux `ip neigh del dev eth0 10.0.2.2`  
      windows `ip -d 192.168.1.5`